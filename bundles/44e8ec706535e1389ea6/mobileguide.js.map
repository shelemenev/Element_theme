{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./matrix-js-sdk/node_modules/loglevel/lib/loglevel.js","webpack:///./matrix-js-sdk/src/logger.ts","webpack:///./node_modules/browser-request/index.js","webpack:///./src/vector/mobile_guide/index.ts","webpack:///./src/vector/getconfig.ts"],"names":["DEFAULT_NAMESPACE","log","methodFactory","methodName","logLevel","loggerName","args","prefix","unshift","supportedByConsole","console","logger","getLogger","setLevel","levels","DEBUG","extendLogger","withPrefix","existingPrefix","getPrefixedLogger","prefixLogger","onBackToElementClick","document","cookie","window","location","href","renderConfigError","message","contactMsg","toHide","getElementsByClassName","errorContainers","e","innerHTML","style","display","initPage","getElementById","onclick","config","getVectorConfig","wkConfig","serverName","defaultHsUrl","defaultIsUrl","incompatibleOptions","filter","i","length","hsUrl","isUrl","result","fetch","json","error","endsWith","encodeURIComponent","innerText","relativeLocation","specificConfigPromise","getConfig","domain","generalConfigPromise","configJson","Object","keys","Error","configJsonFilename","Promise","resolve","reject","request","method","url","qs","cachebuster","Date","now","err","response","body","status","JSON","parse"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAA0C;AAClD,QAAQ,oCAAO,UAAU;AAAA;AAAA;AAAA;AAAA,oGAAC;AAC1B,KAAK,MAAM,EAIN;AACL,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,qEAAqE;AACrE,WAAW;AACX;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,oDAAoD;AACpD,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;ACxSD;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;CAIA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMA,iBAAiB,GAAG,QAA1B,C,CAEA;AACA;AACA;AACA;AACA;;AACAC,+CAAG,CAACC,aAAJ,GAAoB,UAASC,UAAT,EAAqBC,QAArB,EAA+BC,UAA/B,EAA2C;AAC3D,SAAO,YAAkB;AAAA,sCAANC,IAAM;AAANA,UAAM;AAAA;;AACrB;AACA,QAAI,KAAKC,MAAT,EAAiB;AACbD,UAAI,CAACE,OAAL,CAAa,KAAKD,MAAlB;AACH;AACD;;;AACA,UAAME,kBAAkB,GAAGN,UAAU,KAAK,OAAf,IACvBA,UAAU,KAAK,MADQ,IAEvBA,UAAU,KAAK,OAFQ,IAGvBA,UAAU,KAAK,MAHnB;AAIA;;AACA,QAAIM,kBAAJ,EAAwB;AACpB,aAAOC,OAAO,CAACP,UAAD,CAAP,CAAoB,GAAGG,IAAvB,CAAP;AACH,KAFD,MAEO;AACH,aAAOI,OAAO,CAACT,GAAR,CAAY,GAAGK,IAAf,CAAP;AACH;AACD;;AACH,GAjBD;AAkBH,CAnBD;AAqBA;AACA;AACA;AACA;;;AACO,MAAMK,MAAsB,GAAGV,+CAAG,CAACW,SAAJ,CAAcZ,iBAAd,CAA/B;AACPW,MAAM,CAACE,QAAP,CAAgBZ,+CAAG,CAACa,MAAJ,CAAWC,KAA3B,EAAkC,KAAlC;;AAOA,SAASC,YAAT,CAAsBL,MAAtB,EAA8C;AAC1CA,QAAM,CAACM,UAAP,GAAoB,UAASV,MAAT,EAAyC;AACzD,UAAMW,cAAc,GAAG,KAAKX,MAAL,IAAe,EAAtC;AACA,WAAOY,iBAAiB,CAACD,cAAc,GAAGX,MAAlB,CAAxB;AACH,GAHD;AAIH;;AAEDS,YAAY,CAACL,MAAD,CAAZ;;AAEA,SAASQ,iBAAT,CAA2BZ,MAA3B,EAA2D;AACvD,QAAMa,YAA4B,GAAGnB,+CAAG,CAACW,SAAJ,CAAe,GAAEZ,iBAAkB,IAAGO,MAAO,EAA7C,CAArC;;AACA,MAAIa,YAAY,CAACb,MAAb,KAAwBA,MAA5B,EAAoC;AAChC;AACAS,gBAAY,CAACI,YAAD,CAAZ;AACAA,gBAAY,CAACb,MAAb,GAAsBA,MAAtB;AACAa,gBAAY,CAACP,QAAb,CAAsBZ,+CAAG,CAACa,MAAJ,CAAWC,KAAjC,EAAwC,KAAxC;AACH;;AACD,SAAOK,YAAP;AACH,C;;;;;;;ACvFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,IAA0C;AAClD;AACA,QAAQ,iCAAO,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AAC3B,KAAK,MAAM,EAQR;AACH,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C;;AAE9C;AACA,eAAe;AACf;AACA,kDAAkD;;AAElD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,gCAAgC;AACjD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC;AACxC;AACA,KAAK,KAAK;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,+CAA+C;AACjF;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mEAAmE,oCAAoC;;AAEvG,uCAAuC,2DAA2D;;AAElG;AACA,4CAA4C,YAAY;AACxD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC,iCAAiC;AACxE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gDAAgD,YAAY;AAC5D;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC,YAAY;;AAEnD;AACA;AACA,kBAAkB;AAClB,kBAAkB;AAClB;;AAEA;AACA;;AAEA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,YAAY,mBAAmB;AAC/B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;AC7eA;AAAA;AAAA;AAAA;AAEA;;AAEA,SAASC,oBAAT,GAAsC;AAClC;AACAC,UAAQ,CAACC,MAAT,GAAkB,6DAAlB;AACAC,QAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,KAAvB;AACH,C,CAED;;;AACA,SAASC,iBAAT,CAA2BC,OAA3B,EAAkD;AAC9C,Q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","file":"bundles/44e8ec706535e1389ea6/mobileguide.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","/*\nCopyright 2018 AndrÃ© Jaenisch\nCopyright 2019, 2021 The Matrix.org Foundation C.I.C.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\n/**\n * @module logger\n */\n\nimport log, { Logger } from \"loglevel\";\n\n// This is to demonstrate, that you can use any namespace you want.\n// Namespaces allow you to turn on/off the logging for specific parts of the\n// application.\n// An idea would be to control this via an environment variable (on Node.js).\n// See https://www.npmjs.com/package/debug to see how this could be implemented\n// Part of #332 is introducing a logging library in the first place.\nconst DEFAULT_NAMESPACE = \"matrix\";\n\n// because rageshakes in react-sdk hijack the console log, also at module load time,\n// initializing the logger here races with the initialization of rageshakes.\n// to avoid the issue, we override the methodFactory of loglevel that binds to the\n// console methods at initialization time by a factory that looks up the console methods\n// when logging so we always get the current value of console methods.\nlog.methodFactory = function(methodName, logLevel, loggerName) {\n    return function(...args) {\n        /* eslint-disable @typescript-eslint/no-invalid-this */\n        if (this.prefix) {\n            args.unshift(this.prefix);\n        }\n        /* eslint-enable @typescript-eslint/no-invalid-this */\n        const supportedByConsole = methodName === \"error\" ||\n            methodName === \"warn\" ||\n            methodName === \"trace\" ||\n            methodName === \"info\";\n        /* eslint-disable no-console */\n        if (supportedByConsole) {\n            return console[methodName](...args);\n        } else {\n            return console.log(...args);\n        }\n        /* eslint-enable no-console */\n    };\n};\n\n/**\n * Drop-in replacement for <code>console</code> using {@link https://www.npmjs.com/package/loglevel|loglevel}.\n * Can be tailored down to specific use cases if needed.\n */\nexport const logger: PrefixedLogger = log.getLogger(DEFAULT_NAMESPACE);\nlogger.setLevel(log.levels.DEBUG, false);\n\nexport interface PrefixedLogger extends Logger {\n    withPrefix?: (prefix: string) => PrefixedLogger;\n    prefix?: string;\n}\n\nfunction extendLogger(logger: PrefixedLogger) {\n    logger.withPrefix = function(prefix: string): PrefixedLogger {\n        const existingPrefix = this.prefix || \"\";\n        return getPrefixedLogger(existingPrefix + prefix);\n    };\n}\n\nextendLogger(logger);\n\nfunction getPrefixedLogger(prefix: string): PrefixedLogger {\n    const prefixLogger: PrefixedLogger = log.getLogger(`${DEFAULT_NAMESPACE}-${prefix}`);\n    if (prefixLogger.prefix !== prefix) {\n        // Only do this setup work the first time through, as loggers are saved by name.\n        extendLogger(prefixLogger);\n        prefixLogger.prefix = prefix;\n        prefixLogger.setLevel(log.levels.DEBUG, false);\n    }\n    return prefixLogger;\n}\n","// Browser Request\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// UMD HEADER START \n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n  }\n}(this, function () {\n// UMD HEADER END\n\nvar XHR = XMLHttpRequest\nif (!XHR) throw new Error('missing XMLHttpRequest')\nrequest.log = {\n  'trace': noop, 'debug': noop, 'info': noop, 'warn': noop, 'error': noop\n}\n\nvar DEFAULT_TIMEOUT = 3 * 60 * 1000 // 3 minutes\n\n//\n// request\n//\n\nfunction request(options, callback) {\n  // The entry-point to the API: prep the options object and pass the real work to run_xhr.\n  if(typeof callback !== 'function')\n    throw new Error('Bad callback given: ' + callback)\n\n  if(!options)\n    throw new Error('No options given')\n\n  var options_onResponse = options.onResponse; // Save this for later.\n\n  if(typeof options === 'string')\n    options = {'uri':options};\n  else\n    options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.\n\n  options.onResponse = options_onResponse // And put it back.\n\n  if (options.verbose) request.log = getLogger();\n\n  if(options.url) {\n    options.uri = options.url;\n    delete options.url;\n  }\n\n  if(!options.uri && options.uri !== \"\")\n    throw new Error(\"options.uri is a required argument\");\n\n  if(typeof options.uri != \"string\")\n    throw new Error(\"options.uri must be a string\");\n\n  var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect']\n  for (var i = 0; i < unsupported_options.length; i++)\n    if(options[ unsupported_options[i] ])\n      throw new Error(\"options.\" + unsupported_options[i] + \" is not supported\")\n\n  options.callback = callback\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n  options.body    = options.body || null\n  options.timeout = options.timeout || request.DEFAULT_TIMEOUT\n\n  if(options.headers.host)\n    throw new Error(\"Options.headers.host is not supported\");\n\n  if(options.json) {\n    options.headers.accept = options.headers.accept || 'application/json'\n    if(options.method !== 'GET')\n      options.headers['content-type'] = 'application/json'\n\n    if(typeof options.json !== 'boolean')\n      options.body = JSON.stringify(options.json)\n    else if(typeof options.body !== 'string')\n      options.body = JSON.stringify(options.body)\n  }\n  \n  //BEGIN QS Hack\n  var serialize = function(obj) {\n    var str = [];\n    for(var p in obj)\n      if (obj.hasOwnProperty(p)) {\n        str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n      }\n    return str.join(\"&\");\n  }\n  \n  if(options.qs){\n    var qs = (typeof options.qs == 'string')? options.qs : serialize(options.qs);\n    if(options.uri.indexOf('?') !== -1){ //no get params\n        options.uri = options.uri+'&'+qs;\n    }else{ //existing get params\n        options.uri = options.uri+'?'+qs;\n    }\n  }\n  //END QS Hack\n  \n  //BEGIN FORM Hack\n  var multipart = function(obj) {\n    //todo: support file type (useful?)\n    var result = {};\n    result.boundry = '-------------------------------'+Math.floor(Math.random()*1000000000);\n    var lines = [];\n    for(var p in obj){\n        if (obj.hasOwnProperty(p)) {\n            lines.push(\n                '--'+result.boundry+\"\\n\"+\n                'Content-Disposition: form-data; name=\"'+p+'\"'+\"\\n\"+\n                \"\\n\"+\n                obj[p]+\"\\n\"\n            );\n        }\n    }\n    lines.push( '--'+result.boundry+'--' );\n    result.body = lines.join('');\n    result.length = result.body.length;\n    result.type = 'multipart/form-data; boundary='+result.boundry;\n    return result;\n  }\n  \n  if(options.form){\n    if(typeof options.form == 'string') throw('form name unsupported');\n    if(options.method === 'POST'){\n        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();\n        options.headers['content-type'] = encoding;\n        switch(encoding){\n            case 'application/x-www-form-urlencoded':\n                options.body = serialize(options.form).replace(/%20/g, \"+\");\n                break;\n            case 'multipart/form-data':\n                var multi = multipart(options.form);\n                //options.headers['content-length'] = multi.length;\n                options.body = multi.body;\n                options.headers['content-type'] = multi.type;\n                break;\n            default : throw new Error('unsupported encoding:'+encoding);\n        }\n    }\n  }\n  //END FORM Hack\n\n  // If onResponse is boolean true, call back immediately when the response is known,\n  // not when the full request is complete.\n  options.onResponse = options.onResponse || noop\n  if(options.onResponse === true) {\n    options.onResponse = callback\n    options.callback = noop\n  }\n\n  // XXX Browsers do not like this.\n  //if(options.body)\n  //  options.headers['content-length'] = options.body.length;\n\n  // HTTP basic authentication\n  if(!options.headers.authorization && options.auth)\n    options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);\n\n  return run_xhr(options)\n}\n\nvar req_seq = 0\nfunction run_xhr(options) {\n  var xhr = new XHR\n    , timed_out = false\n    , is_cors = is_crossDomain(options.uri)\n    , supports_cors = ('withCredentials' in xhr)\n\n  req_seq += 1\n  xhr.seq_id = req_seq\n  xhr.id = req_seq + ': ' + options.method + ' ' + options.uri\n  xhr._id = xhr.id // I know I will type \"_id\" from habit all the time.\n\n  if(is_cors && !supports_cors) {\n    var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri)\n    cors_err.cors = 'unsupported'\n    return options.callback(cors_err, xhr)\n  }\n\n  xhr.timeoutTimer = setTimeout(too_late, options.timeout)\n  function too_late() {\n    timed_out = true\n    var er = new Error('ETIMEDOUT')\n    er.code = 'ETIMEDOUT'\n    er.duration = options.timeout\n\n    request.log.error('Timeout', { 'id':xhr._id, 'milliseconds':options.timeout })\n    return options.callback(er, xhr)\n  }\n\n  // Some states can be skipped over, so remember what is still incomplete.\n  var did = {'response':false, 'loading':false, 'end':false}\n\n  xhr.onreadystatechange = on_state_change\n  xhr.open(options.method, options.uri, true) // asynchronous\n  if(is_cors)\n    xhr.withCredentials = !! options.withCredentials\n  xhr.send(options.body)\n  return xhr\n\n  function on_state_change(event) {\n    if(timed_out)\n      return request.log.debug('Ignoring timed out state change', {'state':xhr.readyState, 'id':xhr.id})\n\n    request.log.debug('State change', {'state':xhr.readyState, 'id':xhr.id, 'timed_out':timed_out})\n\n    if(xhr.readyState === XHR.OPENED) {\n      request.log.debug('Request started', {'id':xhr.id})\n      for (var key in options.headers)\n        xhr.setRequestHeader(key, options.headers[key])\n    }\n\n    else if(xhr.readyState === XHR.HEADERS_RECEIVED)\n      on_response()\n\n    else if(xhr.readyState === XHR.LOADING) {\n      on_response()\n      on_loading()\n    }\n\n    else if(xhr.readyState === XHR.DONE) {\n      on_response()\n      on_loading()\n      on_end()\n    }\n  }\n\n  function on_response() {\n    if(did.response)\n      return\n\n    did.response = true\n    request.log.debug('Got response', {'id':xhr.id, 'status':xhr.status})\n    clearTimeout(xhr.timeoutTimer)\n    xhr.statusCode = xhr.status // Node request compatibility\n\n    // Detect failed CORS requests.\n    if(is_cors && xhr.statusCode == 0) {\n      var cors_err = new Error('CORS request rejected: ' + options.uri)\n      cors_err.cors = 'rejected'\n\n      // Do not process this request further.\n      did.loading = true\n      did.end = true\n\n      return options.callback(cors_err, xhr)\n    }\n\n    options.onResponse(null, xhr)\n  }\n\n  function on_loading() {\n    if(did.loading)\n      return\n\n    did.loading = true\n    request.log.debug('Response body loading', {'id':xhr.id})\n    // TODO: Maybe simulate \"data\" events by watching xhr.responseText\n  }\n\n  function on_end() {\n    if(did.end)\n      return\n\n    did.end = true\n    request.log.debug('Request done', {'id':xhr.id})\n\n    xhr.body = xhr.responseText\n    if(options.json) {\n      try        { xhr.body = JSON.parse(xhr.responseText) }\n      catch (er) { return options.callback(er, xhr)        }\n    }\n\n    options.callback(null, xhr, xhr.body)\n  }\n\n} // request\n\nrequest.withCredentials = false;\nrequest.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;\n\n//\n// defaults\n//\n\nrequest.defaults = function(options, requester) {\n  var def = function (method) {\n    var d = function (params, callback) {\n      if(typeof params === 'string')\n        params = {'uri': params};\n      else {\n        params = JSON.parse(JSON.stringify(params));\n      }\n      for (var i in options) {\n        if (params[i] === undefined) params[i] = options[i]\n      }\n      return method(params, callback)\n    }\n    return d\n  }\n  var de = def(request)\n  de.get = def(request.get)\n  de.post = def(request.post)\n  de.put = def(request.put)\n  de.head = def(request.head)\n  return de\n}\n\n//\n// HTTP method shortcuts\n//\n\nvar shortcuts = [ 'get', 'put', 'post', 'head' ];\nshortcuts.forEach(function(shortcut) {\n  var method = shortcut.toUpperCase();\n  var func   = shortcut.toLowerCase();\n\n  request[func] = function(opts) {\n    if(typeof opts === 'string')\n      opts = {'method':method, 'uri':opts};\n    else {\n      opts = JSON.parse(JSON.stringify(opts));\n      opts.method = method;\n    }\n\n    var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));\n    return request.apply(this, args);\n  }\n})\n\n//\n// CouchDB shortcut\n//\n\nrequest.couch = function(options, callback) {\n  if(typeof options === 'string')\n    options = {'uri':options}\n\n  // Just use the request API to do JSON.\n  options.json = true\n  if(options.body)\n    options.json = options.body\n  delete options.body\n\n  callback = callback || noop\n\n  var xhr = request(options, couch_handler)\n  return xhr\n\n  function couch_handler(er, resp, body) {\n    if(er)\n      return callback(er, resp, body)\n\n    if((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {\n      // The body is a Couch JSON object indicating the error.\n      er = new Error('CouchDB error: ' + (body.error.reason || body.error.error))\n      for (var key in body)\n        er[key] = body[key]\n      return callback(er, resp, body);\n    }\n\n    return callback(er, resp, body);\n  }\n}\n\n//\n// Utility\n//\n\nfunction noop() {}\n\nfunction getLogger() {\n  var logger = {}\n    , levels = ['trace', 'debug', 'info', 'warn', 'error']\n    , level, i\n\n  for(i = 0; i < levels.length; i++) {\n    level = levels[i]\n\n    logger[level] = noop\n    if(typeof console !== 'undefined' && console && console[level])\n      logger[level] = formatted(console, level)\n  }\n\n  return logger\n}\n\nfunction formatted(obj, method) {\n  return formatted_logger\n\n  function formatted_logger(str, context) {\n    if(typeof context === 'object')\n      str += ' ' + JSON.stringify(context)\n\n    return obj[method].call(obj, str)\n  }\n}\n\n// Return whether a URL is a cross-domain request.\nfunction is_crossDomain(url) {\n  var rurl = /^([\\w\\+\\.\\-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+))?)?/\n\n  // jQuery #8138, IE may throw an exception when accessing\n  // a field from window.location if document.domain has been set\n  var ajaxLocation\n  try { ajaxLocation = location.href }\n  catch (e) {\n    // Use the href attribute of an A element since IE will modify it given document.location\n    ajaxLocation = document.createElement( \"a\" );\n    ajaxLocation.href = \"\";\n    ajaxLocation = ajaxLocation.href;\n  }\n\n  var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || []\n    , parts = rurl.exec(url.toLowerCase() )\n\n  var result = !!(\n    parts &&\n    (  parts[1] != ajaxLocParts[1]\n    || parts[2] != ajaxLocParts[2]\n    || (parts[3] || (parts[1] === \"http:\" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === \"http:\" ? 80 : 443))\n    )\n  )\n\n  //console.debug('is_crossDomain('+url+') -> ' + result)\n  return result\n}\n\n// MIT License from http://phpjs.org/functions/base64_encode:358\nfunction b64_enc (data) {\n    // Encodes string using MIME base64 algorithm\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc=\"\", tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    // assume utf8 data\n    // data = this.utf8_encode(data+'');\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1<<16 | o2<<8 | o3;\n\n        h1 = bits>>18 & 0x3f;\n        h2 = bits>>12 & 0x3f;\n        h3 = bits>>6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n        break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n        break;\n    }\n\n    return enc;\n}\n    return request;\n//UMD FOOTER START\n}));\n//UMD FOOTER END\n","import { logger } from \"matrix-js-sdk/src/logger\";\n\nimport { getVectorConfig } from '../getconfig';\n\nfunction onBackToElementClick(): void {\n    // Cookie should expire in 4 hours\n    document.cookie = 'element_mobile_redirect_to_guide=false;path=/;max-age=14400';\n    window.location.href = '../';\n}\n\n// NEVER pass user-controlled content to this function! Hardcoded strings only please.\nfunction renderConfigError(message: string): void {\n    const contactMsg = \"If this is unexpected, please contact your system administrator \" +\n        \"or technical support representative.\";\n    message = `<h2>Error loading Element</h2><p>${message}</p><p>${contactMsg}</p>`;\n\n    const toHide = document.getElementsByClassName(\"mx_HomePage_container\");\n    const errorContainers = document.getElementsByClassName(\n        \"mx_HomePage_errorContainer\",\n    ) as HTMLCollectionOf<HTMLDialogElement>;\n\n    for (const e of toHide) {\n        // We have to clear the content because .style.display='none'; doesn't work\n        // due to an !important in the CSS.\n        e.innerHTML = '';\n    }\n    for (const e of errorContainers) {\n        e.style.display = 'block';\n        e.innerHTML = message;\n    }\n}\n\nasync function initPage(): Promise<void> {\n    document.getElementById('back_to_element_button').onclick = onBackToElementClick;\n\n    const config = await getVectorConfig('..');\n\n    // We manually parse the config similar to how validateServerConfig works because\n    // calling that function pulls in roughly 4mb of JS we don't use.\n\n    const wkConfig = config['default_server_config']; // overwritten later under some conditions\n    const serverName = config['default_server_name'];\n    const defaultHsUrl = config['default_hs_url'];\n    const defaultIsUrl = config['default_is_url'];\n\n    const incompatibleOptions = [wkConfig, serverName, defaultHsUrl].filter(i => !!i);\n    if (incompatibleOptions.length > 1) {\n        return renderConfigError(\n            \"Invalid configuration: can only specify one of default_server_config, default_server_name, \" +\n            \"or default_hs_url.\",\n        );\n    }\n    if (incompatibleOptions.length < 1) {\n        return renderConfigError(\"Invalid configuration: no default server specified.\");\n    }\n\n    let hsUrl = '';\n    let isUrl = '';\n\n    if (wkConfig && wkConfig['m.homeserver']) {\n        hsUrl = wkConfig['m.homeserver']['base_url'];\n\n        if (wkConfig['m.identity_server']) {\n            isUrl = wkConfig['m.identity_server']['base_url'];\n        }\n    }\n\n    if (serverName) {\n        // We also do our own minimal .well-known validation to avoid pulling in the js-sdk\n        try {\n            const result = await fetch(`https://${serverName}/.well-known/matrix/client`);\n            const wkConfig = await result.json();\n            if (wkConfig && wkConfig['m.homeserver']) {\n                hsUrl = wkConfig['m.homeserver']['base_url'];\n\n                if (wkConfig['m.identity_server']) {\n                    isUrl = wkConfig['m.identity_server']['base_url'];\n                }\n            }\n        } catch (e) {\n            logger.error(e);\n            return renderConfigError(\"Unable to fetch homeserver configuration\");\n        }\n    }\n\n    if (defaultHsUrl) {\n        hsUrl = defaultHsUrl;\n        isUrl = defaultIsUrl;\n    }\n\n    if (!hsUrl) {\n        return renderConfigError(\"Unable to locate homeserver\");\n    }\n\n    if (hsUrl && !hsUrl.endsWith('/')) hsUrl += '/';\n    if (isUrl && !isUrl.endsWith('/')) isUrl += '/';\n\n    if (hsUrl !== 'https://matrix.org/') {\n        (document.getElementById('configure_element_button') as HTMLAnchorElement).href =\n            \"https://mobile.element.io?hs_url=\" + encodeURIComponent(hsUrl) +\n            \"&is_url=\" + encodeURIComponent(isUrl);\n        document.getElementById('step1_heading').innerHTML= '1: Install the app';\n        document.getElementById('step2_container').style.display = 'block';\n        document.getElementById('hs_url').innerText = hsUrl;\n\n        if (isUrl) {\n            document.getElementById('custom_is').style.display = 'block';\n            document.getElementById('is_url').style.display = 'block';\n            document.getElementById('is_url').innerText = isUrl;\n        }\n    }\n}\n\ninitPage();\n","/*\nCopyright 2018, 2020 New Vector Ltd\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/\n\nimport request from 'browser-request';\n\nimport type { IConfigOptions } from \"matrix-react-sdk/src/IConfigOptions\";\n\n// Load the config file. First try to load up a domain-specific config of the\n// form \"config.$domain.json\" and if that fails, fall back to config.json.\nexport async function getVectorConfig(relativeLocation=''): Promise<IConfigOptions> {\n    if (relativeLocation !== '' && !relativeLocation.endsWith('/')) relativeLocation += '/';\n\n    const specificConfigPromise = getConfig(`${relativeLocation}config.${document.domain}.json`);\n    const generalConfigPromise = getConfig(relativeLocation + \"config.json\");\n\n    try {\n        const configJson = await specificConfigPromise;\n        // 404s succeed with an empty json config, so check that there are keys\n        if (Object.keys(configJson).length === 0) {\n            throw new Error(); // throw to enter the catch\n        }\n        return configJson as IConfigOptions;\n    } catch (e) {\n        return await generalConfigPromise as IConfigOptions;\n    }\n}\n\nfunction getConfig(configJsonFilename: string): Promise<{}> {\n    return new Promise(function(resolve, reject) {\n        request(\n            { method: \"GET\", url: configJsonFilename, qs: { cachebuster: Date.now() } },\n            (err, response, body) => {\n                try {\n                    if (err || response.status < 200 || response.status >= 300) {\n                        // Lack of a config isn't an error, we should\n                        // just use the defaults.\n                        // Also treat a blank config as no config, assuming\n                        // the status code is 0, because we don't get 404s\n                        // from file: URIs so this is the only way we can\n                        // not fail if the file doesn't exist when loading\n                        // from a file:// URI.\n                        if (response) {\n                            if (response.status == 404 || (response.status == 0 && body == '')) {\n                                resolve({});\n                            }\n                        }\n                        reject({ err: err, response: response });\n                        return;\n                    }\n\n                    // We parse the JSON ourselves rather than use the JSON\n                    // parameter, since this throws a parse error on empty\n                    // which breaks if there's no config.json and we're\n                    // loading from the filesystem (see above).\n                    resolve(JSON.parse(body));\n                } catch (e) {\n                    reject({ err: e });\n                }\n            },\n        );\n    });\n}\n"],"sourceRoot":""}